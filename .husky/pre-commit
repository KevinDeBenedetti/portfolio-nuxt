echo "ğŸ” Pre-commit: Lancement des vÃ©rifications..."
pnpm lint
echo "âœ… Linting terminÃ©s avec succÃ¨s"
echo "ğŸ‰ Pre-commit hook exÃ©cutÃ© avec succÃ¨s !"

echo "ğŸ” Scanning for secrets before commit..."

if ! gitleaks detect --verbose --source .; then
    echo ""
    echo "âŒ Secrets detected! Commit blocked."
    echo "ğŸ”§ Fix suggestions:"
    echo "  â€¢ Replace hardcoded secrets with process.env.VARIABLE_NAME"
    echo "  â€¢ Move secrets to .env files"
    echo "  â€¢ Use Nuxt's runtimeConfig properly"
    echo ""
    echo "Example fix for nuxt.config.ts:"
    echo "  secretApiKey: process.env.NUXT_SECRET_API_KEY"
    echo ""
    exit 1
fi

echo "âœ… No secrets found - commit allowed"